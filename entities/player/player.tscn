[gd_scene load_steps=8 format=3 uid="uid://c364awakh0qqj"]

[ext_resource type="Script" uid="uid://pvqa8xdknxqq" path="res://entities/player/player.gd" id="1_1hmtu"]
[ext_resource type="PackedScene" uid="uid://bh7ppnkyaubf7" path="res://vfx/hit_flash/HitFlash.tscn" id="2_8fjmc"]
[ext_resource type="PackedScene" uid="uid://k5os7k8wlcvf" path="res://entities/player/assets/character.tscn" id="2_635qg"]
[ext_resource type="PackedScene" uid="uid://jwhg4beayert" path="res://entities/health_component/HealthComponent.tscn" id="2_fkugw"]
[ext_resource type="Material" uid="uid://c3gmswlr7otco" path="res://entities/player/assets/character.tres" id="3_sglur"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_yel1f"]
radius = 0.441262

[sub_resource type="BoxShape3D" id="BoxShape3D_abrql"]
size = Vector3(1.18555, 1, 1.12976)

[node name="Player" type="CharacterBody3D" node_paths=PackedStringArray("punch_hand_r", "punch_hand_l") groups=["player"]]
collision_mask = 28
floor_constant_speed = true
platform_on_leave = 1
script = ExtResource("1_1hmtu")
jump_height = 1.35
jump_time_to_peak = 0.4
slam_descent_speed = 30.0
slam_knockback = 2.5
slam_cooldown = 1.5
slam_windup_delay = 0.15
rot_speed = 10.0
push_force = 0.2
roll_push_multiplier = 10.0
roll_jump_cancel_threshold = 0.2
auto_run_latch_time = 0.3
roll_cooldown = 2.0
roll_recharge_time = 4.0
roll_chain_delay = 0.15
primary_attack_speed = 1.0
attack_cooldown = 0.0
combo_window_time = 0.8
punch_hand_r = NodePath("character/root/Skeleton3D/hand_r/punch_hand_r")
punch_hand_l = NodePath("character/root/Skeleton3D/hand_l/punch_hand_l")

[node name="HitFlash" parent="." instance=ExtResource("2_8fjmc")]
mesh_path = NodePath("../character/root/Skeleton3D/Character_mesh")
flash_color = Color(1, 0, 0, 1)

[node name="HealthComponent" parent="." instance=ExtResource("2_fkugw")]

[node name="character" parent="." instance=ExtResource("2_635qg")]

[node name="Skeleton3D" parent="character/root" index="0"]
bones/0/rotation = Quaternion(6.169901e-08, 8.742278e-08, 3.1066276e-15, 1)
bones/1/position = Vector3(-0.008731988, 0.12409723, 0.061529018)
bones/1/rotation = Quaternion(-0.31050354, 0.10026883, -0.05509991, 0.94366187)
bones/1/scale = Vector3(0.99999994, 0.9999998, 0.9999999)
bones/2/position = Vector3(-0.0022428206, 0.15357031, -0.030904587)
bones/2/rotation = Quaternion(0.35841346, -0.097316235, 0.060161557, 0.9265258)
bones/2/scale = Vector3(1.0000001, 1.0000001, 1.0000001)
bones/3/position = Vector3(-0.011414434, 0.15584959, 0.009279774)
bones/3/rotation = Quaternion(0.0597144, 2.1646878e-09, 4.6087678e-10, 0.9982156)
bones/3/scale = Vector3(1, 1.0000002, 1.0000004)
bones/4/rotation = Quaternion(0.12025624, 3.2393707e-06, 2.3700366e-06, 0.9927429)
bones/5/rotation = Quaternion(-0.14255711, -0.0036461886, 0.0041872957, 0.98977107)
bones/6/position = Vector3(0.09566361, 0.07201032, -0.03221636)
bones/6/rotation = Quaternion(-0.56215435, -0.41048408, -0.42233583, 0.5806184)
bones/7/rotation = Quaternion(-0.64879173, -0.09408586, -0.29594913, 0.69471675)
bones/7/scale = Vector3(0.99999964, 0.99999946, 1.0000001)
bones/8/rotation = Quaternion(-1.6692992e-08, 0.03399872, -6.6990204e-08, 0.9994219)
bones/8/scale = Vector3(1.0000002, 1.0000002, 0.9999999)
bones/9/rotation = Quaternion(1.1644482e-07, -9.815499e-09, -0.61169726, 0.7910919)
bones/9/scale = Vector3(1.0000004, 1.0000004, 1)
bones/10/rotation = Quaternion(7.013373e-09, 0.27597302, -7.4917255e-09, 0.96116537)
bones/10/scale = Vector3(0.9999998, 1.0000001, 0.9999997)
bones/11/rotation = Quaternion(-0.25399587, 0.28853744, 0.030950956, 0.92264533)
bones/11/scale = Vector3(0.99999875, 0.99999857, 0.9999991)
bones/12/position = Vector3(0.052212127, 0.027676312, -0.009928433)
bones/12/rotation = Quaternion(0.15248081, 0.81465745, -0.39233047, 0.3989482)
bones/12/scale = Vector3(0.99999976, 0.9999998, 1.0000004)
bones/13/rotation = Quaternion(-0.07944519, -0.0654524, -0.0359292, 0.994039)
bones/14/rotation = Quaternion(-0.13378473, 0.07860489, -0.0814665, 0.9845233)
bones/16/rotation = Quaternion(-0.057558857, 0.0035025522, -0.019824725, 0.99813914)
bones/16/scale = Vector3(1, 1, 0.99999994)
bones/17/rotation = Quaternion(-0.18569702, -0.04563151, 0.03433676, 0.9809462)
bones/18/rotation = Quaternion(-0.14129068, -0.007473928, 0.0047237338, 0.9899287)
bones/19/position = Vector3(-0.095663644, 0.07551362, -0.0029079625)
bones/19/rotation = Quaternion(-0.341636, 0.7505409, 0.35849643, 0.43755406)
bones/20/rotation = Quaternion(-0.7849541, -0.024379726, -0.29918674, 0.541978)
bones/20/scale = Vector3(1.0000002, 0.9999997, 1.0000001)
bones/21/rotation = Quaternion(1.05210354e-07, -0.17816897, 2.4107841e-08, 0.9839999)
bones/21/scale = Vector3(1.0000001, 0.99999994, 1.0000002)
bones/22/rotation = Quaternion(1.9447546e-08, -1.0614043e-07, 0.72643244, 0.687238)
bones/22/scale = Vector3(1.0000001, 0.9999997, 0.9999999)
bones/23/rotation = Quaternion(3.410914e-08, -0.28356457, 1.0808474e-08, 0.9589532)
bones/23/scale = Vector3(1, 1.0000001, 0.99999994)
bones/24/rotation = Quaternion(-0.23203215, -0.31718776, 0.1288934, 0.9104611)
bones/24/scale = Vector3(0.99999905, 0.99999833, 0.999999)
bones/25/position = Vector3(-0.052212354, 0.027676368, -0.009928144)
bones/25/rotation = Quaternion(-0.15248094, 0.81465733, -0.39233062, -0.39894822)
bones/25/scale = Vector3(0.99999994, 0.9999993, 1.0000004)
bones/26/rotation = Quaternion(-0.079445235, 0.06545243, 0.03592922, 0.994039)
bones/27/rotation = Quaternion(-0.13378465, -0.07860491, 0.081466496, 0.9845233)
bones/29/rotation = Quaternion(-0.057558782, -0.003502566, 0.019824736, 0.99813914)
bones/29/scale = Vector3(0.99999994, 0.9999998, 1)
bones/30/rotation = Quaternion(-0.18569705, 0.045631494, -0.03433681, 0.9809462)
bones/31/rotation = Quaternion(-0.14129068, 0.007473929, -0.0047237086, 0.9899287)
bones/32/position = Vector3(0.13895878, 0.042082313, -0.011197346)
bones/32/rotation = Quaternion(0.5355189, 0.41870236, 0.54955596, 0.48569137)
bones/32/scale = Vector3(1.0000056, 0.96291804, 0.9999985)
bones/33/rotation = Quaternion(-5.757704e-09, -0.021108178, 1.2968313e-09, 0.9997772)
bones/33/scale = Vector3(0.99999994, 1, 1)
bones/34/rotation = Quaternion(-7.5779425e-08, -2.6384072e-08, 0.78607875, 0.61812633)
bones/34/scale = Vector3(1.0364043, 0.9594844, 1)
bones/35/rotation = Quaternion(-0.2526145, -0.65760237, -0.21722671, 0.67569053)
bones/35/scale = Vector3(1.0000684, 1.0271672, 1.0177242)
bones/36/rotation = Quaternion(1.0090723e-05, 0.95450085, -0.2982082, -4.7821077e-06)
bones/36/scale = Vector3(1.0000002, 0.9999997, 1)
bones/37/rotation = Quaternion(3.936567e-08, -0.012212317, 9.326614e-08, 0.99992543)
bones/37/scale = Vector3(1.0000011, 0.9999996, 0.9999996)
bones/38/position = Vector3(-0.1389589, 0.042082325, -0.011195451)
bones/38/rotation = Quaternion(0.7116265, -0.40801892, -0.44620615, 0.35778272)
bones/38/scale = Vector3(1.0000038, 0.9630627, 1.0000021)
bones/39/rotation = Quaternion(-2.7674934e-08, -0.2034211, -2.0787846e-08, 0.97909135)
bones/39/scale = Vector3(1.0000001, 1, 1)
bones/40/rotation = Quaternion(1.6145432e-08, -9.374878e-08, -0.7748806, 0.63210773)
bones/40/scale = Vector3(1.0368303, 0.9591186, 1)
bones/41/rotation = Quaternion(-0.3077691, 0.6263781, 0.33166233, 0.63476676)
bones/41/scale = Vector3(1.0000536, 1.0156547, 1.0289941)
bones/42/rotation = Quaternion(5.098135e-06, 0.9545148, -0.29816368, -2.474441e-06)
bones/42/scale = Vector3(0.9999997, 1, 1.0000001)
bones/43/rotation = Quaternion(5.9192325e-07, 0.042228818, -3.1462068e-07, 0.99910796)
bones/43/scale = Vector3(0.9999999, 1.0000001, 1.0000001)

[node name="Character_mesh" parent="character/root/Skeleton3D" index="0"]
material_override = ExtResource("3_sglur")
material_overlay = ExtResource("3_sglur")

[node name="hand_r" parent="character/root/Skeleton3D" index="1"]
transform = Transform3D(-0.668383, 0.4066931, -0.62278646, -0.7356238, -0.23749718, 0.6343901, 0.11009233, 0.88215244, 0.4579128, -0.32842332, 0.27420658, 0.18633726)

[node name="hand_l" parent="character/root/Skeleton3D" index="2"]
transform = Transform3D(-0.6683829, -0.40669352, 0.6227865, 0.7356234, -0.2374969, 0.63439065, -0.110092625, 0.88215274, 0.4579128, 0.28276587, 0.27420336, 0.18635142)

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("CapsuleShape3D_yel1f")

[node name="FirstAttackTimer" type="Timer" parent="."]
one_shot = true

[node name="SprintTimer" type="Timer" parent="."]
wait_time = 0.6
one_shot = true

[node name="FirstAttackArea" type="Area3D" parent="."]
collision_mask = 4

[node name="CollisionShape3D" type="CollisionShape3D" parent="FirstAttackArea"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0.651306)
shape = SubResource("BoxShape3D_abrql")

[connection signal="body_entered" from="character/root/Skeleton3D/hand_r/punch_hand_r" to="." method="_on_punch_hand_r_body_entered"]
[connection signal="body_entered" from="character/root/Skeleton3D/hand_l/punch_hand_l" to="." method="_on_punch_hand_l_body_entered"]
[connection signal="timeout" from="FirstAttackTimer" to="." method="_on_first_attack_timer_timeout"]
[connection signal="timeout" from="SprintTimer" to="." method="_on_sprint_timer_timeout"]

[editable path="character"]
